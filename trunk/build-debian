#!/bin/bash
#
# Build the DEBIAN source files for upload to LaunchPad PPA.
#
# Ensure the version number below also matches:
#	src/indicator-punycode.py
#	packaging/debian/changelog.  


VERSION="1.0.2"
NAME="indicator-punycode"

source=( $NAME".py" )
hicolorIcons=( $NAME".svg" ) # List of hicolor icons belonging to the indicator (contents of the icons directory).
hicolorColours=( 78dc96 6496dc ) # List of colours present across ALL the hicolor icons.

. ../PythonUtils/build-debian-common
copyTopLevelAndSource source
copyHicolorCreateThemed hicolorIcons hicolorColours

# Specific code to handle opacity.
sed -i 's/"opacity:0.2"/"opacity:0.15"/' build/$NAME-$VERSION/icons/elementary/indicator-punycode.svg
sed -i 's/"opacity:0.2"/"opacity:0.3"/' build/$NAME-$VERSION/icons/lubuntu/indicator-punycode.svg
sed -i 's/"opacity:0.2"/"opacity:0.3"/' build/$NAME-$VERSION/icons/ubuntu-mono-dark/indicator-punycode.svg
sed -i 's/"opacity:0.2"/"opacity:0.3"/' build/$NAME-$VERSION/icons/ubuntu-mono-light/indicator-punycode.svg

copyPOCreateMO
createOrigTarGz
copyDebian
addIconsToDebianInstall hicolorIcons
addMOToDebianInstall
buildDeb
cleanUp