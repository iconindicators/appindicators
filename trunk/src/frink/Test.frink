// To run, open a terminal:
//
//	 java -classpath frink.jar frink.parser.Frink -f TestMoonBrightLimb.frink
//
// Both
//
//		sun.frink (http://futureboy.us/frinksamp/sun.frink)
//		frink.jar (http://futureboy.us/frinkjar/frink.jar)
//
// must be present.
//
// Reference: http://futureboy.us/frinkdocs/
//
// Compare against:
//		http://www.geoastro.de/elevaz/index.htm
//		http://www.satellite-calculations.com/Satellite/suncalc.htm


use sun.frink


// Observer position, etc.
lat = -33 degree // Negative for South
long = -151 degree // Negative for East
now = now[]

[ az, alt ] = airlessSunAzimuthAltitude[ now, lat, long ]
println[ "Sun:" ]
println[ "  Az " + ( az + 180 degrees ) mod circle + " radians" ]
println[ "  Alt " + alt + " radians" ]
println[ "  Az " + ( ( ( az + 180 degrees ) mod circle ) -> degrees ) + " degrees" ]
println[ "  Alt " + ( alt -> degrees ) + " degrees" ]
println[]

[ az, alt ] = airlessMoonAzimuthAltitude[ now, lat, long ]
println[ "Moon:" ]
println[ "  Az " + ( az + 180 degrees ) mod circle + " radians" ]
println[ "  Alt " + alt + " radians" ]
println[ "  Az " + ( ( ( az + 180 degrees ) mod circle ) -> degrees ) + " degrees" ]
println[ "  Alt " + ( alt -> degrees ) + " degrees" ]
println[]

[ az, alt ] = refractedMoonAzimuthAltitude[ now, lat, long ]
println[ "Moon:" ]
println[ "  Az " + ( az + 180 degrees ) mod circle + " radians" ]
println[ "  Alt " + alt + " radians" ]
println[ "  Az " + ( ( ( az + 180 degrees ) mod circle ) -> degrees ) + " degrees" ]
println[ "  Alt " + ( alt -> degrees ) + " degrees" ]
println[]

println[ "Moon phase angle (0 <= degrees <= 180 ): " + moonPhaseAngle[ now ] ]
println[ "Moon illuminated fraction (%) : " + moonIlluminatedFraction[ now ] * 100 ]
println[ "Moon position angle (radians): " + moonPositionAngle[ now ] ]
println[ "Moon position angle (degrees): " + ( moonPositionAngle[ now ] -> degrees ) ]
[ ra, dec ] = moonApparentRADecl[ now ]
println[ "Moon parallactic angle (radians): " + parallacticAngle[ now, lat, long, ra, dec ] ]
println[ "Moon parallactic angle (degrees): " + ( parallacticAngle[ now, lat, long, ra, dec ] -> degrees ) ]
println[ "Moon position angle relative to zenith (radians): " + moonPositionAngleRelativeToZenith[ now, lat, long ] ] // THIS IS THE MOON'S BRIGHT LIMB!
println[ "Moon position angle relative to zenith (degrees): " + ( moonPositionAngleRelativeToZenith[ now, lat, long ] -> degrees ) ]
println[ "Moon position angle relative to zenith mod circle (radians): " + moonPositionAngleRelativeToZenith[ now, lat, long ] mod circle ] //TODO Don't know where the 'mod circle' originated.
println[ "Moon position angle relative to zenith mod circle (degrees): " + ( moonPositionAngleRelativeToZenith[ now, lat, long ] mod circle -> degrees ) ] //TODO Don't know where the 'mod circle' originated.