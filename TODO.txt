#TODO Need to update /home/bernard/Programming/Indicators/indicatorbase/src/indicatorbase/locale/README


#TODO Probably want to add/commit 
#   convert_markdown_to_debian_changelog.py
# but then remove as it is now redundant.
#
# That means also committing the debian directory and control.cfg stuff...
# may as well have a record of it.


#TODO Figure how to tag a commit in SVN...
# Want to know when all the new stuff is committed
# and when the old stuff finally gets deleted.
# Maybe just do a commit (or several) with ALL CAPS as the message.
# 1. Add all new stuff.     INITIAL COMMIT OF INDICATORS AND TOOLS USING PYPROJECT.TOML AND CREATING A WHEEL
# 2. Remove old stuff.		REMOVAL OF LEGACY INDICATORS AND CREATING A DEB


#TODO Eventually need to update 
#	https://launchpad.net/~thebernmeister/+archive/ubuntu/ppa
#	https://askubuntu.com/questions/30334/what-application-indicators-are-available
# explaing to go to PyPI.


#TODO Testing install of indicatortest whl via pip on OS versions
#	Ubuntu 20.04   ALL GOOD


#TODO Not sure if needed in pyproject.toml 'Depends':
# 	pycairo
# (and not even sure where I saw this)


#TODO Current thinking is to create a .whl, with or without icons/mo and incorporate the .whl into a .deb.
# 
# The same would apply to creating a .rpm.
# 
# Given Indicator Lunar will have to switch to a venv so that the Python libraries ephem/sgp4
# can be installed via pip, what if each indicator is installed via pip, exclusively or in part?
# 
# 
# Option 1
# --------
# As described above; create a .whl, partially or complete,
# and bundle that .whl within a .deb/.rpm which contains
# the source, icons, .mo and .desktop, then installs
# OS level packages. 
# 
# 
# Option 2
# --------
# Create a complete .whl and upload to PyPI.
# Create a .deb/.rpm which does not contain the software, icons, .mo,
# and only installs OS level packages, copies .desktop,
# creates a venv and installs the software (and icons/.mo) via PyPI. 
# 
#
# Option 3
# --------
# Create a complete .whl and upload to PyPI, including .desktop.
# Create an install command along the lines of:
#   sudo apt install "OS level package" &&
#   python3 -m venv $HOME/.venv_indicator_fortune &&
#   $HOME/.venv_indicator_fortune/python3 install indicator_fortune &&
#   cp $HOME/.venv_indicator_fortune/.../indicator_fortune/.../indicator-fortune.py.desktop $HOME/.local/share/applications &&
#   cp $HOME/.venv_indicator_fortune/.../indicator_fortune/.../indicator-fortune.py.desktop $HOME/.config/autostart &&
# which could be put into a shell script for installation.
#
# The command to run is something like:
#   $HOME/.venv_indicator_fortune/python3 $HOME/.venv_indicator_fortune/.../indicator_fortune/indicator-fortune.py


#TODO SVG colours 
# https://johndecember.com/html/spec/colorsvghex.html


#TODO Good background on Python build/env
#   https://chriswarrick.com/blog/2023/01/15/how-to-improve-python-packaging/
#   https://blog.ganssle.io/articles/2021/10/setup-py-deprecated.html
#   https://sinoroc.gitlab.io/kb/python/package_data.html


#TODO Single version number location
#   https://packaging.python.org/en/latest/guides/single-sourcing-package-version/
#   https://stackoverflow.com/questions/72357031/set-version-of-module-from-a-file-when-configuring-setuptools-using-setup
#   https://stackoverflow.com/questions/60430112/single-sourcing-package-version-for-setup-cfg-python-projects
#   https://stackoverflow.com/questions/74608905/single-source-of-truth-for-python-project-version-in-presence-of-pyproject-toml


#TODO Shared project layout
#   https://stackoverflow.com/questions/18087122/python-sharing-common-code-among-a-family-of-scripts
#   https://stackoverflow.com/questions/73580708/how-to-share-code-between-python-internals-projects
#   https://stackoverflow.com/questions/48954870/how-to-share-code-between-python-projects
#   https://discuss.python.org/t/multiple-related-programs-one-pyproject-toml-or-multiple-projects/17427/2


#         DON"T THINK I NEED THIS ANY MORE.
#TODO Using venv without activation...
#   https://stackoverflow.com/questions/69319991/how-to-install-a-python-package-into-an-virtual-environment-without-activating-i
#   https://stackoverflow.com/questions/56936293/run-python-script-without-activating-virtual-environment


#         DON"T THINK I NEED THIS ANY MORE.
#TODO The MANIFEST.in is ONLY used for source distributions and NOT for Wheels.
# So need some other way to include locale/icons.
#
# https://sinoroc.gitlab.io/kb/python/package_data.html
# https://stackoverflow.com/questions/42791179/why-does-pip-install-not-include-my-package-data-files
# https://stackoverflow.com/questions/13307408/python-packaging-data-files-are-put-properly-in-tar-gz-file-but-are-not-install
# https://stackoverflow.com/questions/61624018/include-extra-file-in-a-python-package-using-setuptools
# https://setuptools.pypa.io/en/latest/userguide/miscellaneous.html
# https://setuptools.pypa.io/en/latest/userguide/datafiles.html
# https://github.com/yktoo/indicator-sound-switcher/blob/dev/setup.py
# https://stackoverflow.com/questions/32609248/setuptools-adding-additional-files-outside-package
# https://stackoverflow.com/questions/34070103/how-to-compile-po-gettext-translations-in-setup-py-python-script
# https://stackoverflow.com/questions/1612733/including-non-python-files-with-setup-py
# https://discuss.python.org/t/how-to-package-translation-files-po-mo-in-a-future-proof-way/20096
# https://stackoverflow.com/questions/53285634/is-there-a-portable-way-to-provide-localization-of-a-package-distributed-on-pypi
# https://stackoverflow.com/questions/42791179/why-does-pip-install-not-include-my-package-data-files
# https://stackoverflow.com/questions/22958245/what-is-the-correct-way-to-include-localisation-in-python-packages
# https://stackoverflow.com/questions/55365356/how-to-include-localized-message-in-python-setuptools
#
# https://github.com/koehlma/pygtkspellcheck/blob/17923aee49ea8d7245cc91154b81da5c4f034b22/pyproject.toml


#         DON"T THINK I NEED THIS ANY MORE.
#TODO Pre/post setuptools (setup.py)...
# https://stackoverflow.com/questions/15853058/run-custom-task-when-call-pip-install
# https://stackoverflow.com/questions/36702902/custom-pip-install-commands-not-running
# https://stackoverflow.com/questions/65130573/in-setup-py-how-to-run-a-system-command-before-any-pip-install
# https://stackoverflow.com/questions/44549600/custom-post-install-script-not-running-with-pip
# https://stackoverflow.com/questions/44655513/running-post-install-code-from-pypi-via-pip


#         DON"T THINK I NEED THIS ANY MORE.
#TODO debian/rules
#   https://wiki.debian.org/Python/LibraryStyleGuide?action=show&redirect=Python%2FPackaging#debian.2Frules
#   https://github.com/rsm-gh/build-deb/blob/master/DEBIAN_BASICS.md


#         DON"T THINK I NEED THIS ANY MORE.
#TODO
# Have seen mentioned pybuild in various debian/rules files.  Should I be now using that?
#   https://www.debian.org/doc/packaging-manuals/python-policy/index.html#pybuild
#   https://wiki.debian.org/Python/LibraryStyleGuide?action=show&redirect=Python%2FPackaging#debian.2Frules
#   https://manpages.debian.org/unstable/dh-python/pybuild.1.en.html#flit_plugin


#         DON"T THINK I NEED THIS ANY MORE.
#TODO Need to figure out for indicator-lunar how to install pyephem et al 
# via the preinst/postinst scripts working given how `pip` has changed things.
# If I cannot, need to add something about how to install and remove on the main README.md
# See discussion about error on Debian bookworm and venv.
#
# As per a comment below the question in 
#   https://stackoverflow.com/questions/75602063/pip-install-r-requirements-txt-is-failing-this-environment-is-externally-mana/75696359#75696359
# will likely need
#   python3-full
#   python3-pip
#   python3-venv
# in the Debian install depends.
#
# Some points from reading various sources...
# Can create the venv at install time, which also installs ephem/sgp4 via pip.
# Perhaps a good idea to check at indicator run time if venv/ephem/sgp4 exists
# and if not, alert the user...either give instructions on how to fix it all
# by installing, etc, OR, tell user to uninstall indicator and hope that works?
#
# If checking at run time, perhaps create the venv and install ephem/sgp4
# at run time rather than install time.
# This makes the debian install easier perhaps?
#
# How to name the venv?
# Perhaps in user's HOME directory and call it .venv_indiator_lunar_1_0_100?
# Perhaps add a datetime to the end in case we need to blow it away?
# But can blow it away anyway without appending the datetime...
#
#
# https://www.makeuseof.com/create-python-virtual-environment-on-ubuntu/
#
# python3 -m venv /opt/my_first_venv
#
# /some/path/to/venv/bin/python -m pip install -U package_name


#         DON"T THINK I NEED THIS ANY MORE.
#TODO When installing indicator-lunar on Debian bookworm, got an error:
#
#     error: externally-managed-environment
#
#     × This environment is externally managed
#     ╰─> To install Python packages system-wide, try apt install
#     python3-xyz, where xyz is the package you are trying to
#     install.
#
#     If you wish to install a non-Debian-packaged Python package,
#     create a virtual environment using python3 -m venv path/to/venv.
#     Then use path/to/venv/bin/python and path/to/venv/bin/pip. Make
#     sure you have python3-full installed.
#
#     If you wish to install a non-Debian packaged Python application,
#     it may be easiest to use pipx install xyz, which will manage a
#     virtual environment for you. Make sure you have pipx installed.
#
#     See /usr/share/doc/python3.11/README.venv for more information.
#
#     note: If you believe this is a mistake, please contact your Python installation or OS distribution provider. You can override this, at the risk of breaking your Python installation or OS, by passing --break-system-packages.
#     hint: See PEP 668 for the detailed specification.
#
# This will affect Ubuntu 24.04 onward as Pip has been changed such that
# Python packages need to be installed into a virtual environment.
#
# So for ephem/sgp4 and eventually skyfield, need to make a change.
# 
#   https://stackoverflow.com/a/75696359/2156453
#
# Perhaps in the debian/postinst all we need to do is modify
#   sudo pip3 install --ignore-installed --upgrade ephem sgp4 || true
# to be instead something that can do the following...
#   
#    71  cd /home/bernard
#    72  python3 -m venv .venv
#    73  sudo apt install python3.11-venv 
#    74  python3 -m venv .venv
#    75  source .venv/bin/activate
#    76  python3 -m pip install --upgrade pip
#    77  cd Programming/PlayListMaker/
#    78  python3 -m pip install -e .
#    79  playlistmaker 
#
# More on this issue
#   https://stackoverflow.com/questions/76873955/pip-install-user-doesnt-work-on-debian-12
#   https://stackoverflow.com/questions/75608323/how-do-i-solve-error-externally-managed-environment-every-time-i-use-pip-3
#   https://stackoverflow.com/questions/64005822/how-to-specify-external-system-dependencies-to-a-python-package
#   https://stackoverflow.com/questions/55293003/how-to-handle-external-dependencies-in-python
#
# If the postinst will no longer work in kicking off an install to a venv,
# will have to do a runtime check in the indicator to look for ephem et al
# and if not present, explain to the user how to install via pip into a venv.
#
# If the postinst does work, likely need a postrm to clean up the pip installation.
#
# Maybe go with a modified postinst (and a new postrm) but ALSO have a runtime check
# to ensure ephem et al are installed and if not, point user to a readme on how to install
# (but at this stage if ephem is not present, the installation should be assumed to be broken).
#
# How permanent is a venv?  Do we need a venv for each indicator as needed,
# and even then one for each version of each indicator?
#
# Can Python script in /usr/share/indicator-lunar refer to a Python library in a venv?
# Need the full path to the venv?
#
# According to 
#   https://dev.to/bowmanjd/python-tools-for-managing-virtual-environments-3bko
# don't need to activate a venv to use it; can just call the venv directly.


#         DON"T THINK I NEED THIS ANY MORE.
#TODO i18n
# Should look at i18n at least for pyproject.toml and how to include translation file in a .whl...
# https://discuss.python.org/t/how-to-package-translation-files-po-mo-in-a-future-proof-way/20096
# https://stackoverflow.com/questions/22958245/what-is-the-correct-way-to-include-localisation-in-python-packages
# https://stackoverflow.com/questions/53285634/is-there-a-portable-way-to-provide-localization-of-a-package-distributed-on-pypi
# https://github.com/s-ball/mo_installer
# https://stackoverflow.com/questions/55365356/how-to-include-localized-message-in-python-setuptools
# https://stackoverflow.com/questions/34070103/how-to-compile-po-gettext-translations-in-setup-py-python-script
#
# https://github.com/thinkle/gourmet/blob/master/setup.py
# https://github.com/PythonOT/POT/blob/master/setup.py
# https://github.com/moinwiki/moin/blob/master/setup.py
# https://github.com/GourmandRecipeManager/gourmand/blob/main/setup.py
#
# https://www.mattlayman.com/blog/2015/i18n/
#
# https://stackoverflow.com/questions/32609248/setuptools-adding-additional-files-outside-package
#
# Also look at Sound Switcher below which has i18n/po and also a snap.


#TODO Packaging
#   https://setuptools.pypa.io/en/latest/setuptools.html
#   https://packaging.python.org/en/latest/
#   https://pypa-build.readthedocs.io/en/stable/
#   https://ianhopkinson.org.uk/2022/02/understanding-setup-py-setup-cfg-and-pyproject-toml-in-python/
#   http://ivory.idyll.org/blog/2021-transition-to-pyproject.toml-example.html
#   https://stackoverflow.com/questions/7110604/is-there-a-standard-way-to-create-debian-packages-for-distributing-python-progra
#   https://www.wefearchange.org/2010/05/from-python-package-to-ubuntu-package.html
#   https://stackoverflow.com/questions/63304163/how-to-create-a-deb-package-for-a-python-project-without-setup-py
#   https://stackoverflow.com/questions/1382569/how-do-i-do-debian-packaging-of-a-python-package?rq=3
#   https://stackoverflow.com/questions/72352801/migration-from-setup-py-to-pyproject-toml-how-to-specify-package-name
#   https://manpages.debian.org/unstable/dh-python/pybuild.1.en.html
#   https://stackoverflow.com/questions/64345965/how-can-i-debian-package-a-python-application-with-a-systemd-unit-using-stdeb3-p
#   https://stackoverflow.com/questions/76208149/build-python-debian-package-with-setuptools
#   https://stackoverflow.com/questions/63304163/how-to-create-a-deb-package-for-a-python-project-without-setup-py
#   https://discuss.python.org/t/looking-for-an-up-to-date-step-by-step-guide-to-create-a-deb-from-a-python-package/15766/4
#   https://www.debian.org/doc/packaging-manuals/python-policy/
#   https://pypi.org/project/wheel2deb/
#   https://github.com/upciti/wheel2deb/issues/54
#   https://stackoverflow.com/questions/12079607/make-virtualenv-inherit-specific-packages-from-your-global-site-packages
#   https://stackoverflow.com/questions/71976246/how-add-default-packages-to-all-new-pythons-venvs
#   https://stackoverflow.com/questions/70272023/using-pyproject-toml-with-flexible-version-from-datetime
#   https://stackoverflow.com/questions/75526020/dynamically-version-a-pyproject-toml-package-without-importing-runtime-dependenc
#   https://stackoverflow.com/questions/74608905/single-source-of-truth-for-python-project-version-in-presence-of-pyproject-toml
#   https://stackoverflow.com/questions/76041299/using-values-generated-by-python-scripts-in-dynamic-fields-in-pyproject-toml
#   https://stackoverflow.com/questions/76081078/using-the-return-value-of-a-python-function-as-the-value-for-version-field-in-py


#TODO AppImage
# https://appimage.org/


#TODO Flathub
# https://flatpak.org/setup/Ubuntu
# https://docs.flatpak.org/en/latest/first-build.html
# https://github.com/PlaintextGroup/oss-virtual-incubator/blob/main/proposals/flathub-linux-app-store.md


#TODO Snap
#   https://snapcraft.io/docs/snapcraft-overview
#   https://snapcraft.io/docs/python-apps
#   https://forum.snapcraft.io/t/parse-info-on-pythonpart-utilizing-pyproject-toml/33294
#   https://forum.snapcraft.io/t/building-a-core20-python-snap-using-pyproject-toml/22028
#   https://stackoverflow.com/questions/73310069/should-i-be-using-only-pyproject-toml
#   https://stackoverflow.com/questions/72352801/migration-from-setup-py-to-pyproject-toml-how-to-specify-package-name
#   https://stackoverflow.com/questions/71193095/questions-on-pyproject-toml-vs-setup-py
#   https://stackoverflow.com/questions/62983756/what-is-pyproject-toml-file-for
#   https://setuptools.pypa.io/en/latest/userguide/pyproject_config.html
#   https://pypi.org/project/poetry2setup/


#TODO Debian install from PPA
#   https://unix.stackexchange.com/questions/248367/how-to-install-ppas-from-launchpad-on-non-ubuntu-distros-like-debian


#TODO 
# Look at sound-switcher which does several interesting things...
#   https://yktoo.com/en/software/sound-switcher-indicator/#installation
#
# Creates snap and other packages for deployment.
#
# https://github.com/yktoo/indicator-sound-switcher/blob/dev/debian/control
# https://github.com/yktoo/indicator-sound-switcher/blob/dev/snap/local/launch.sh
#
# For autostart with a snap, see how this works...need to do something different?


#TODO What about support for other Linux distributions?  Do I build an equivalent .deb for these?
#   https://en.wikipedia.org/wiki/Arch_Linux
#
#   https://en.wikipedia.org/wiki/Fedora_Linux
#   https://stackoverflow.com/questions/59248180/how-to-install-rpmdev-tools-on-ubuntu
#   https://superuser.com/questions/615023/how-to-build-rpm-package-correctly
#   https://stackoverflow.com/questions/29038961/how-can-i-build-an-rpm-package-in-a-debian-based-system
#   https://rpm-packaging-guide.github.io/#packaging-software
#   https://blog.jwf.io/2017/11/first-rpm-package-fedora/
#   https://discuss.python.org/t/tool-to-build-a-rpm-package-backed-by-pep-517/4020/15
#   https://rpm-guide.readthedocs.io/en/latest/index.html
#   https://discuss.python.org/t/tool-to-build-a-rpm-package-backed-by-pep-517/4020/14
#   https://stackoverflow.com/questions/42286786/how-to-create-a-rpm-for-python-application
#   https://rpm.org/documentation.html
#   https://refspecs.linuxbase.org/LSB_4.1.0/LSB-Core-generic/LSB-Core-generic/pkgformat.html
#   https://opensource.com/article/18/9/how-build-rpm-packages
#   https://www.howtoforge.com/tutorial/how-to-convert-packages-between-deb-and-rpm/
#   https://developers.redhat.com/blog/2019/03/18/rpm-packaging-guide-creating-rpm#creating_the_rpm_package_for_vitetris
#   https://www.reddit.com/r/Fedora/comments/trwdok/new_to_fedora_how_to_show_app_indicator_icons_on/
#   https://www.reddit.com/r/Fedora/comments/ucbunn/no_application_icons_displayed_in_the_tray/
#   https://www.reddit.com/r/Fedora/comments/z0wz53/libayatanaappindicator3dev_package_on_fedora/
#   https://packages.fedoraproject.org/pkgs/gnome-shell-extension-appindicator/gnome-shell-extension-appindicator/
#   https://unix.stackexchange.com/questions/6766/is-there-is-a-ppa-service-equivalent-in-the-fedora-world
#   https://forums.fedoraforum.org/showthread.php?330198-To-PPA-or-not-to-PPA
#
#   https://en.wikipedia.org/wiki/Gentoo_Linux
#
#   https://en.wikipedia.org/wiki/Slackware
